exports.handler = async () => {
  const html = `
  <!DOCTYPE html>
  <html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>S3同期ツール</title>
    <style>
      body { font-family: sans-serif; padding: 2em; }
      button { font-size: 16px; padding: 10px 20px; }
      #status { margin-top: 1em; }
    </style>
  </head>
  <body>
    <h1>S3バケット同期</h1>
    <button onclick="sync()">同期実行</button>
    <p id="status">未実行</p>

    <script>
      async function sync() {
        document.getElementById("status").innerText = "同期中...";
        try {
          const res = await fetch("/sync", { method: "POST" });
          const text = await res.text();
          document.getElementById("status").innerText = "完了: " + text;
        } catch (err) {
          document.getElementById("status").innerText = "エラー: " + err.message;
        }
      }
    </script>
  </body>
  </html>
  `;

  return {
    statusCode: 200,
    headers: {
      'Content-Type': 'text/html',
    },
    body: html
  };
};
